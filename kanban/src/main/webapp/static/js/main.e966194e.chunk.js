(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{48:function(e,n,t){},49:function(e,n,t){"use strict";t.r(n);var r,a,c,i,o,s,u,d,l,p=t(0),b=t.n(p),h=t(18),j=t.n(h),f=t(8),x=t(34),O=t(5),g=t(6),m=t(9),v=t(3),y=t.n(v),k=t(4),w=t(24),S=t(25),D=function(){function e(n){Object(w.a)(this,e),this.url=n,this._token=void 0}return Object(S.a)(e,[{key:"token",get:function(){return this._token}},{key:"login",value:function(){var e=Object(k.a)(y.a.mark((function e(n,t){var r,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.url,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:n,password:t})});case 2:if(!(r=e.sent).ok){e.next=9;break}return e.next=6,r.json();case 6:return a=e.sent,this._token=a.accessToken,e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this)})));return function(n,t){return e.apply(this,arguments)}}()},{key:"register",value:function(){var e=Object(k.a)(y.a.mark((function e(n,t,r){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.url,"/register"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:n,password:r,name:t})});case 2:return a=e.sent,e.abrupt("return",a.ok);case 4:case"end":return e.stop()}}),e,this)})));return function(n,t,r){return e.apply(this,arguments)}}()}]),e}(),C=function(){function e(n,t){Object(w.a)(this,e),this.url=n,this.auth=t}return Object(S.a)(e,[{key:"getDashboards",value:function(){return fetch(this.url,{headers:{"content-type":"application/json",authorization:"Bearer ".concat(this.auth.token)}}).then((function(e){return e.json()}))}},{key:"createContent",value:function(e,n){return fetch("".concat(this.url,"/").concat(n),{method:"POST",headers:{"content-type":"application/json",authorization:"Bearer ".concat(this.auth.token)},body:JSON.stringify({text:e})}).then((function(e){return e.json()}))}},{key:"createDashboard",value:function(e){return fetch("".concat(this.url,"/"),{method:"POST",headers:{"content-type":"application/json",authorization:"Bearer ".concat(this.auth.token)},body:JSON.stringify({name:e})}).then((function(e){return e.json()}))}},{key:"deleteContent",value:function(e,n){return fetch("".concat(this.url,"/").concat(n,"/").concat(e),{method:"DELETE",headers:{"content-type":"application/json",authorization:"Bearer ".concat(this.auth.token)}}).then((function(e){return e.json()}))}},{key:"deleteDashboard",value:function(e){return fetch("".concat(this.url,"/").concat(e),{method:"DELETE",headers:{"content-type":"application/json",authorization:"Bearer ".concat(this.auth.token)}}).then((function(e){return e.json()}))}},{key:"moveDashboard",value:function(e,n){return fetch("".concat(this.url,"/").concat(e,"/move"),{method:"POST",headers:{"content-type":"application/json",authorization:"Bearer ".concat(this.auth.token)},body:JSON.stringify({position:n})}).then((function(e){return e.json()}))}},{key:"moveContent",value:function(e,n,t,r){return fetch("".concat(this.url,"/").concat(e,"/").concat(n,"/move"),{method:"POST",headers:{"content-type":"application/json",authorization:"Bearer ".concat(this.auth.token)},body:JSON.stringify({position:r,dashboardId:t})}).then((function(e){return e.json()}))}}]),e}(),z="http://localhost:8080/kanban",P=new D("".concat(z,"/api/auth")),I=new C("".concat(z,"/api/backend"),P),B=t(1),T=Object(p.createContext)({login:function(){var e=Object(k.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),logout:function(){},token:void 0}),E=function(e){var n=e.children,t=Object(p.useState)(),r=Object(m.a)(t,2),a=r[0],c=r[1],i=function(){var e=Object(k.a)(y.a.mark((function e(n,t){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.login(n,t);case 2:return(r=e.sent)&&c(P.token),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();return Object(B.jsx)(T.Provider,{value:{token:a,login:i,logout:function(){return c(void 0)}},children:n})},R=function(){return Object(p.useContext)(T)},L=g.a.nav(r||(r=Object(O.a)(["\n  background-color: black;\n  color: white;\n  height: 60px;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0 20px;\n  .spacer {\n    flex-grow: 1;\n  }\n  button {\n    border: 1px solid rgba(0, 0, 0, 0);\n    cursor: pointer;\n    &:hover {\n      border: 1px solid white;\n    }\n    background: none;\n    color: white;\n    padding: 10px;\n    font-size: 12pt;\n    font-weight: bold;\n  }\n"]))),V=function(){var e=R().logout;return Object(B.jsxs)(L,{children:[Object(B.jsx)("p",{children:"Lacerba d&d"}),Object(B.jsx)("button",{onClick:e,children:"logout"})]})},J=t(15),N=g.a.div(a||(a=Object(O.a)(["\n  font-size: 12px;\n  padding: 5px;\n  border: 1px solid #ccc;\n  background-color: ",";\n  margin: 2px;\n  display: flex;\n  justify-content: space-between;\n"])),(function(e){return e.isDragging?"lightgreen":"white"})),q=function(e){var n=e.text,t=e.id,r=e.index,a=e.onDelete;return Object(B.jsx)("div",{children:Object(B.jsx)(J.b,{draggableId:t,index:r,children:function(e,t){return Object(B.jsx)("div",Object(f.a)(Object(f.a)(Object(f.a)({ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{children:Object(B.jsxs)(N,{isDragging:t.isDragging,children:[Object(B.jsx)("span",{children:n}),Object(B.jsx)(A,{onClick:a,children:" x "})]})}))}})})},A=g.a.button(c||(c=Object(O.a)(["\n  background-color: #ff4d4d;\n  color: white;\n  font-size: 15px;\n  font-weight: bold;\n  border: none;\n  border-radius: 5px;\n  width: 20px;\n  height: 20px;\n  display: grid;\n  place-content: center;\n  margin: 0;\n  padding: 0;\n  &:hover {\n    background-color: #ff1414;\n  }\n"]))),F=t(14),H=function(e){var n=e.create,t=Object(F.a)(),r=t.handleSubmit,a=t.register,c=t.control;return Object(B.jsxs)(_,{onSubmit:r((function(e){n(e.name),c.setValue("name","")})),children:[Object(B.jsx)("input",{name:"name",placeholder:"crea contenuto",defaultValue:"",ref:a({required:!0})}),Object(B.jsx)("input",{type:"submit"})]})},_=g.a.form(i||(i=Object(O.a)(["\n  padding: 10px;\n"]))),U=g.a.div(o||(o=Object(O.a)(["\n  width: 220px;\n  height: 100%;\n  min-height: 400px;\n  border: 1px solid #ccc;\n  border-radius: 10px;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  overflow-y: scroll;\n  flex-grow: 1;\n  h2 {\n    margin: 0;\n    padding: 10px 0;\n    border-bottom: 1px solid #ccc;\n    font-size: 15px;\n    text-align: center;\n  }\n"]))),M=g.a.div(s||(s=Object(O.a)(["\n  background-color: ",";\n  height: 100%;\n  flex-grow: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 5px;\n"])),(function(e){return e.isDraggingOver?"lightblue":"white"})),G=function(e){var n=e.id,t=e.name,r=e.contents,a=e.index,c=e.createContent,i=e.deleteContent,o=e.onDelete;return Object(B.jsx)(J.b,{draggableId:n,index:a,children:function(e,a){return Object(B.jsxs)(U,Object(f.a)(Object(f.a)({},e.draggableProps),{},{ref:e.innerRef,children:[Object(B.jsx)("h2",Object(f.a)(Object(f.a)({},e.dragHandleProps),{},{children:t})),0===r.length&&Object(B.jsx)(K,{onClick:o,children:"Delete"}),Object(B.jsx)(J.c,{droppableId:n,type:"content",children:function(e,n){return Object(B.jsxs)(M,Object(f.a)(Object(f.a)({isDraggingOver:n.isDraggingOver,ref:e.innerRef},e.droppableProps),{},{children:[r.map((function(e,n){return Object(B.jsx)(q,{onDelete:function(){return i(e.id)},id:e.id,index:n,text:e.text},e.id)})),e.placeholder]}))}}),Object(B.jsx)(H,{create:c})]}))}})},K=g.a.button(u||(u=Object(O.a)(["\n  margin: 2px;\n  background-color: #ff4d4d;\n  color: white;\n  font-size: 10px;\n  font-weight: bold;\n  border: none;\n  border-radius: 5px;\n  padding: 10px 5px;\n  &:hover {\n    background-color: #ff1414;\n  }\n"]))),Q=g.a.div(d||(d=Object(O.a)([""]))),W=function(e){var n=e.onCreate,t=Object(F.a)(),r=t.register,a=t.handleSubmit,c=t.control;return Object(B.jsxs)(Q,{children:[Object(B.jsx)("h2",{children:"Crea Dashboard"}),Object(B.jsxs)("form",{onSubmit:a((function(e){n(e.title),c.setValue("title","")})),children:[Object(B.jsx)("input",{name:"title",ref:r({required:!0,maxLength:20})}),Object(B.jsx)("button",{type:"submit",children:" Crea "})]})]})},X=g.a.div(l||(l=Object(O.a)(["\n  display: flex;\n  flex-direction: row;\n  gap: 10px;\n  min-width: 400px;\n  overflow-y: scroll;\n"])));function Y(){var e=Object(p.useState)([]),n=Object(m.a)(e,2),t=n[0],r=n[1];function a(e){return c.apply(this,arguments)}function c(){return(c=Object(k.a)(y.a.mark((function e(n){var t,a,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.destination){e.next=2;break}return e.abrupt("return");case 2:return t=n.destination.index,a=n.draggableId,e.next=6,I.moveDashboard(a,t);case 6:c=e.sent,r(c);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(){return(i=Object(k.a)(y.a.mark((function e(n,t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.createContent(n,t);case 2:a=e.sent,r(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(){return(o=Object(k.a)(y.a.mark((function e(n){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.createDashboard(n);case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(){return(s=Object(k.a)(y.a.mark((function e(n,t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.deleteContent(n,t);case 2:a=e.sent,r(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return(u=Object(k.a)(y.a.mark((function e(n){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.deleteDashboard(n);case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){return l.apply(this,arguments)}function l(){return(l=Object(k.a)(y.a.mark((function e(n){var t,a,c,i,o;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.destination){e.next=2;break}return e.abrupt("return");case 2:return t=n.source.droppableId,a=n.draggableId,c=n.destination.droppableId,i=n.destination.index,e.next=8,I.moveContent(t,a,c,i);case 8:o=e.sent,r(o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return(b=Object(k.a)(y.a.mark((function e(n){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("DASHBOARD"!==(t=n.type)){e.next=6;break}return e.next=4,a(n);case 4:e.next=9;break;case 6:if("content"!==t){e.next=9;break}return e.next=9,d(n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(p.useEffect)((function(){function e(){return(e=Object(k.a)(y.a.mark((function e(){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.getDashboards();case 2:n=e.sent,r(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(B.jsx)(J.a,{onDragEnd:function(e){return b.apply(this,arguments)},children:Object(B.jsx)(J.c,{droppableId:"list",direction:"horizontal",type:"DASHBOARD",children:function(e){return Object(B.jsxs)(X,Object(f.a)(Object(f.a)({ref:e.innerRef},e.droppableProps),{},{children:[t.map((function(e,n){return Object(p.createElement)(G,Object(f.a)(Object(f.a)({deleteContent:function(n){return function(e,n){return s.apply(this,arguments)}(n,e.id)},createContent:function(n){return function(e,n){return i.apply(this,arguments)}(n,e.id)},onDelete:function(){return function(e){return u.apply(this,arguments)}(e.id)},index:n},e),{},{key:e.id}))})),e.placeholder,Object(B.jsx)(W,{onCreate:function(e){return function(e){return o.apply(this,arguments)}(e)}})]}))}})})}var Z,$,ee,ne,te,re,ae,ce=t(7),ie=t(21),oe=function(){var e=Object(p.useState)(!1),n=Object(m.a)(e,2),t=n[0],r=n[1],a=R(),c=a.token,i=a.login,o=Object(F.a)(),s=o.handleSubmit,u=o.register,d=function(){var e=Object(k.a)(y.a.mark((function e(n){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!1),e.next=3,i(n.email,n.password);case 3:t=e.sent,r(!t);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return c?Object(B.jsx)(ce.a,{to:"./"}):Object(B.jsx)(de,{children:Object(B.jsxs)("div",{className:"login",children:[Object(B.jsx)("h1",{children:" Login User"}),Object(B.jsxs)(ue,{onSubmit:s(d),children:[Object(B.jsx)("input",{name:"email",type:"email",placeholder:"email",defaultValue:"",ref:u({required:!0})}),Object(B.jsx)("input",{name:"password",type:"password",placeholder:"password",defaultValue:"",ref:u({required:!0})}),t&&Object(B.jsx)(se,{children:"Invalid login"}),Object(B.jsx)("button",{type:"submit",children:" Login"}),Object(B.jsx)(ie.b,{to:"./register",children:" Register "})]})]})})},se=g.a.p(Z||(Z=Object(O.a)(["\n  color: red;\n"]))),ue=g.a.form($||($=Object(O.a)(["\n  display: flex;\n  flex-direction: column;\n  box-sizing: border-box;\n  gap: 10px;\n  input {\n    height: 30px;\n    padding: 0 10px;\n  }\n  button {\n    background: #4ad2ff;\n    height: 30px;\n    border: none;\n    border-radius: 5px;\n    cursor: pointer;\n    &:hover {\n      background: #06baf6;\n    }\n  }\n"]))),de=g.a.div(ee||(ee=Object(O.a)(["\n  display: grid;\n  place-content: center;\n  .login {\n    border: 1px solid black;\n    margin-top: 20px;\n    padding: 20px;\n    max-width: 90%;\n    width: 800px;\n  }\n"]))),le=function(){var e=Object(p.useState)(!1),n=Object(m.a)(e,2),t=n[0],r=n[1],a=Object(p.useState)(!1),c=Object(m.a)(a,2),i=c[0],o=c[1],s=R().token,u=Object(F.a)(),d=u.handleSubmit,l=u.register,b=function(){var e=Object(k.a)(y.a.mark((function e(n){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!1),e.next=3,P.register(n.email,n.name,n.password);case 3:t=e.sent,r(!t),t&&o(!0);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return s?Object(B.jsx)(ce.a,{to:"./"}):i?(alert("Registazione completata con successo. Vai al login per accedere"),Object(B.jsx)(ce.a,{to:"./login"})):Object(B.jsx)(he,{children:Object(B.jsxs)("div",{className:"login",children:[Object(B.jsx)("h1",{children:" Register User"}),Object(B.jsxs)(be,{onSubmit:d(b),children:[Object(B.jsx)("input",{name:"name",type:"name",placeholder:"name",defaultValue:"",ref:l({required:!0})}),Object(B.jsx)("input",{name:"email",type:"email",placeholder:"email",defaultValue:"",ref:l({required:!0})}),Object(B.jsx)("input",{name:"password",type:"password",placeholder:"password",defaultValue:"",ref:l({required:!0})}),t&&Object(B.jsx)(pe,{children:"Invalid register"}),Object(B.jsx)("button",{type:"submit",children:" Register "}),Object(B.jsx)(ie.b,{to:"./login",children:" Login "})]})]})})},pe=g.a.p(ne||(ne=Object(O.a)(["\n  color: red;\n"]))),be=g.a.form(te||(te=Object(O.a)(["\n  display: flex;\n  flex-direction: column;\n  box-sizing: border-box;\n  gap: 10px;\n  input {\n    height: 30px;\n    padding: 0 10px;\n  }\n  button {\n    background: #4ad2ff;\n    height: 30px;\n    border: none;\n    border-radius: 5px;\n    cursor: pointer;\n    &:hover {\n      background: #06baf6;\n    }\n  }\n"]))),he=g.a.div(re||(re=Object(O.a)(["\n  display: grid;\n  place-content: center;\n  .login {\n    border: 1px solid black;\n    margin-top: 20px;\n    padding: 20px;\n    max-width: 90%;\n    width: 800px;\n  }\n"]))),je=g.a.div(ae||(ae=Object(O.a)(["\n  padding: 20px;\n"])));var fe=function(){return Object(B.jsx)(ie.a,{children:Object(B.jsxs)(ce.d,{children:[Object(B.jsx)(ce.b,{path:"/kanban/login",children:Object(B.jsx)(oe,{})}),Object(B.jsx)(ce.b,{path:"/kanban/register",children:Object(B.jsx)(le,{})}),Object(B.jsxs)(xe,{path:"/kanban/",children:[Object(B.jsx)(V,{}),Object(B.jsx)(je,{children:Object(B.jsx)(Y,{})})]})]})})},xe=function(e){var n=e.children,t=Object(x.a)(e,["children"]),r=R();return Object(B.jsx)(ce.b,Object(f.a)(Object(f.a)({},t),{},{render:function(e){var t=e.location;return r.token?n:Object(B.jsx)(ce.a,{to:{pathname:"/kanban/login",state:{from:t}}})}}))},Oe=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,50)).then((function(n){var t=n.getCLS,r=n.getFID,a=n.getFCP,c=n.getLCP,i=n.getTTFB;t(e),r(e),a(e),c(e),i(e)}))};t(48);j.a.render(Object(B.jsx)(b.a.StrictMode,{children:Object(B.jsx)(E,{children:Object(B.jsx)(fe,{})})}),document.getElementById("root")),Oe()}},[[49,1,2]]]);
//# sourceMappingURL=main.e966194e.chunk.js.map